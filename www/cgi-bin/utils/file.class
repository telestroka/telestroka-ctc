<?php
/***********************************************
-=Ms Site=-

Автор:    Миропольский Михаил <ms@ensk.ru>
Описание: Класс для работы с файловой базой данных.
***********************************************/

require_once('fs.class');

class File extends Fs
{
	function FileIsItemExist($path, $item)
	{
		$items = $this->FileGetInfo($path);
		if ( in_array($item, $items) ) return TRUE;

		return FALSE;
	}

	function FileGetInfo($path)
	{
		$this->FsCreate($path);
		$array = file($path);
		foreach ($array as $key => $value) $array[$key] = trim($value);
		return $array;
	}

	function FileAdd($path, $item)
	{
		$items = $this->FileGetInfo($path);
		if ( !in_array($item, $items) )
		{
			$this->FsWrite($path, "\n" . $item, 'a');
			return TRUE;
		}
		return FALSE;
	}

	function FileDel($path, $item)
	{
		$items = $this->FileGetInfo($path);

		if ( in_array($item, $items) )
		{
			unlink($path);
			foreach ($items as $item_key => $item_value)
			{
				if ( $item != $item_value ) $this->FsWrite($path, "\n" . $item_value, 'a');
			}
			return TRUE;
		}
		return FALSE;
	}
}
?>